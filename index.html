<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>CHAOS</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  background: #000;
  overflow: hidden;
  font-family: monospace;
  cursor: none;
}

#core {
  position: fixed;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  font-size: clamp(28px, 6vw, 90px);
  color: #00ff88;
  pointer-events: none;
  transition: transform 0.1s, color 0.2s;
  text-align: center;
  z-index: 10;
}

#riddle {
  position: fixed;
  bottom: 10%;
  width: 100%;
  text-align: center;
  font-size: 20px;
  color: #aaa;
  opacity: 0;
  transition: opacity 0.5s;
  z-index: 10;
}

#score {
  position: fixed;
  top: 10px;
  left: 10px;
  color: #00ff88;
  font-size: 14px;
  z-index: 10;
}

.chaos-img {
  position: fixed;
  max-width: 300px;
  opacity: 0;
  animation: chaos 3.2s forwards;
  mix-blend-mode: difference;
  filter: contrast(130%) saturate(160%);
  cursor: none;
}

.target {
  outline: 2px solid #00ff88;
}

@keyframes chaos {
  0% { opacity: 0; transform: scale(0.2) rotate(0deg); }
  20% { opacity: 1; }
  100% { opacity: 0; transform: scale(1.5) rotate(360deg); }
}

@keyframes glitch {
  0% { transform: translate(0); }
  20% { transform: translate(-10px,5px); }
  40% { transform: translate(10px,-5px); }
  60% { transform: translate(-5px,10px); }
  80% { transform: translate(5px,-10px); }
  100% { transform: translate(0); }
}

body.glitch {
  animation: glitch 0.3s;
}
</style>
</head>

<body>

<div id="core">CLICK</div>
<div id="riddle"></div>
<div id="score">SCORE: 0</div>

<audio id="bgSound" src="3.mp3" loop preload="auto"></audio>

<script>
const images = [
  'загружено - 2026-01-05T224423.175.png',
  'загружено - 2026-01-05T225056.516.png',
  'загружено - 2026-01-05T231804.301.png',
  'загружено - 2026-01-05T232153.963.png',
  'загружено - 2026-01-05T232315.524.png',
  'загружено - 2026-01-05T232650.360.png',
  'загружено - 2026-01-05T232714.168.png',
  'загружено - 2026-01-05T232812.329.png',
  'загружено - 2026-01-05T232838.749.png',
  'загружено - 2026-01-05T232903.777.png'
];

const riddles = [
  'Найди то, что уже видело тебя',
  'Это изображение знает больше, чем кажется',
  'Оно смотрит первым',
  'След хаоса скрыт здесь',
  'Ты видел его раньше…'
];

const core = document.getElementById('core');
const sound = document.getElementById('bgSound');
const riddleBox = document.getElementById('riddle');
const scoreBox = document.getElementById('score');

let started = false;
let score = 0;
let targetImage = null;

/* СПАВН КАРТИНОК */
function spawnImage(isTarget = false) {
  const img = document.createElement('img');
  img.src = isTarget ? targetImage : images[Math.floor(Math.random() * images.length)];
  img.className = 'chaos-img';
  img.style.left = Math.random() * innerWidth + 'px';
  img.style.top = Math.random() * innerHeight + 'px';

  if (isTarget) img.dataset.target = 'true';

  img.addEventListener('click', e => {
    e.stopPropagation();
    if (img.dataset.target) {
      score++;
      scoreBox.textContent = 'SCORE: ' + score;
      core.textContent = 'FOUND';
      core.style.color = '#00ff88';
    } else {
      document.body.classList.add('glitch');
      setTimeout(()=>document.body.classList.remove('glitch'),300);
      core.textContent = 'WRONG';
      core.style.color = '#ff0044';
    }
  });

  document.body.appendChild(img);
  setTimeout(() => img.remove(), 3200);
}

setInterval(() => {
  spawnImage();
}, 500);

/* ЗАПУСК ЗАГАДКИ */
function startRiddle() {
  targetImage = images[Math.floor(Math.random() * images.length)];
  riddleBox.textContent = riddles[Math.floor(Math.random() * riddles.length)];
  riddleBox.style.opacity = 1;

  spawnImage(true);

  setTimeout(() => {
    riddleBox.style.opacity = 0;
  }, 3000);
}

setInterval(startRiddle, 6000);

/* МЫШЬ */
document.addEventListener('mousemove', () => {
  core.style.transform =
    `translate(calc(-50% + ${(Math.random()-0.5)*80}px),
               calc(-50% + ${(Math.random()-0.5)*80}px))`;
});

/* КЛИК */
document.addEventListener('click', () => {
  if (!started) {
    sound.volume = 0.25;
    sound.play();
    started = true;
    core.textContent = 'CHAOS';
  }
  core.style.color = `hsl(${Math.random()*360},100%,60%)`;
});

/* СТРАХОВКА ЗВУКА */
setInterval(() => {
  if (started && sound.paused) sound.play().catch(()=>{});
}, 2000);
</script>

</body>
</html>
